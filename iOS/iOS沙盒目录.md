##iOS沙盒目录

| Documents            | 您应该将所有的应用程序数据文件写入到这个目录下。这个目录用于存储用户数据。该路径可通过配置实现iTunes共享文件。可被iTunes备份。 |
| :------------------- | :--------------------------------------- |
| AppName.app 目录       | 这是应用程序的程序包目录，包含应用程序的本身。由于应用程序必须经过签名，所以您在运行时不能对这个目录中的内容进行修改，否则可能会使应用程序无法启动。 |
| Library/ Preferences | 包含应用程序的偏好设置文件。您不应该直接创建偏好设置文件，而是应该使用NSUserDefaults类来取得和设置应用程序的偏好 |
| Library/ Caches      | 用于存放应用程序专用的支持文件，保存应用程序再次启动过程中需要的信息。      |
| tmp 目录               | 这个目录用于存放临时文件，保存应用程序再次启动过程中不需要的信息。该路径下的文件不会被iTunes备份。 |

## 数据持久化 CoreData VS Sqlite

CoreData的优点

- 对象图管理
- 惰性加载的支持（[faulting and uniquing](http://blog.csdn.net/hello_hwc/article/details/46005541)）
- 面向对象的编程，直观易用
- 良好的[多线程支持(注意不是线程安全的)](http://blog.csdn.net/hello_hwc/article/details/46299943)
- 支持redo和undo
- NSFetchedResultController使得与tableview结合编程变得很容易
- KVC与KVO的支持
- ICould的支持
- Apple 推荐的存储方式，API在不断升级

------

CoreData的缺点

- **学习成本高，要很久才能得心应手**
- 对象Schema改变后，数据迁移比较棘手（当然也支持）
- 对于一次大量更新删除等操作效率较低（因为每次都要先取到内存里）
- 对主键的支持要自己去维护（CoreData 通过objectID来唯一确定对象）
- 占用内存会高一些（为了维护ManagedContext，为了跟踪对象变化）

直接使用SQLite的优点

- 学习成本相对较低（没有那么多的类要学，往往计算机或者软件背景的童鞋都有一些数据库知识，用过一些SQL语句）
- 直接使用SQLite引擎，对一次大批量数据的操作性能较好（只需要一个SQL语句即可）。
- 占用内存较少
- 更加轻量
- Android和WP也支持

直接使用SQLite的缺点

- 复杂的对象关系要自己维护
- 没有对象变化跟踪
- 并不是真正的面向对象编程
- 有待补充

第一步，要明确一点，就是不管是CoreData还是直接使用SQLite，都是为了数据持久化，数据持久化的核心是存储的数据是什么。

第二步，分析自己的数据量，数据之间的关系，对数据的操作。优先考虑CoreData吧，因为你学会了真得会发现它非常好用，绝大部分App的数据量达不到CoreData性能瓶颈的时候。但是一下情况下，要考虑SQLite

- 跨平台。这点是CoreData不支持的，它是Cocoa的一部分，意味着是用C实现的，如果数据要迁移到Android或者PC，不要使用CoreData
- 一次大批量更新，删除数据。例如，有10000条存储，每个存储都有一个Bool值来表示一个状态，使用CoreData来操作的效率是很低的。
- 有待补充

## CoreData核心对象

| NSPersistentStoreCoordinator | 数据连接器类(中间人,不能直接控制)                       |
| ---------------------------- | ---------------------------------------- |
| NSManagedObjectContext       | 1: 操作实际内容 (对持久层的一个操作)2: 插入数据, 查询数据, 删除数据,修改数据3: 是我们开发中主要交互的类, 数据的CRUD都通过这个Context(上下文)去触发命令并返回结果. |
| NSManagedObject              | 1: 包含了各个实体(表)的定义信息, 包含了表或者是数据库的结构.2: 用来添加实体的属性,建立属性之间的关系.3: 操作方法: 视图编辑器,也可以用代码.4: 构建整个数据库的表结构, 表字段类型, 表与表之间的关系等等, 凡是和数据结构有关系的定义, 通通都通过这个类来管理. |
| NSEntityDescription          | NSPersistentStoreCoordinator (持久化数据助理)1: 相当于数据库的连接器2: 作用: 设置数据存储的名字, 位置,存储方式, 存储时机.3: 原理: 从下层文件取出数据, 交给上层的被管理的对象上下文4: 实际上这个类才是真正意义上跟数据库(.sqlite文件)打交道的,主要是根据 NSManagedObjectModel 执行表结构的建立通过 NSManagedObjectContext的命令执行数据交互. |

## keychain 

